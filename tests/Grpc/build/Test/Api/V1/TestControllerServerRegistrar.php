<?php

/**
 * This code was auto-generated by the prototype/compiler@dev.
 * Do not edit this file manually.
 */

declare(strict_types=1);

namespace Test\Api\V1;

use Prototype\Grpc\Server\RpcMethod;
use Prototype\Grpc\Server\ServiceDescriptor;
use Prototype\Grpc\Server\ServiceRegistrar;
use Prototype\Grpc\Server\ServiceRegistry;

/**
 * @api
 */
final class TestControllerServerRegistrar implements ServiceRegistrar
{
    public function __construct(
        private readonly TestControllerServer $server,
    ) {
    }

    /**
     * {@inheritdoc}
     */
    public function register(ServiceRegistry $registry): ServiceRegistry
    {
        return $registry->addService(
            new ServiceDescriptor(
                'test.api.v1.TestController',
                [
                    new RpcMethod('AddTask', RpcMethod::createHandler($this->server->addTask(...), AddTaskRequest::class)),
                ],
            ),
        );
    }
}
